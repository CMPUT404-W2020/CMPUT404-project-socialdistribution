{% load static %}
<!doctype html>
<!DOCTYPE html>
<html>

<head>
    <title>Squawk | Create Account</title>
    <meta charset="UTF-8">
    <meta name="description" content="Homepage">
    <meta name="author" content="CMPUT404 Group">

    <!-- stylesheets / css -->
	<link rel="stylesheet" href="{% static 'sd/style.css' %}">
</head>

<body>

    <div class="header">
        <a href="{% url 'login' %}">
	  	<img class="logo" src="{% static 'sd\icons\logo.png' %}" alt="Logo" height = "50em">
            <h2>SQUAWK</h2>
        </a>

    </div>

    <div class="signup-form">
        {% block content %}
        <h3>Create Account</h3>

        <!-- This form needs authentication!! Right now it's basically just a redirect -->
        <!-- This does not connect to the back-end at all -->
{% comment %} 
        <form method="POST">
            {% csrf_token %}
                {{ form.as_p }} {% endcomment %}
        <form method="POST" onsubmit="onSubmit()">
                {% csrf_token %}
            <div class="row">
                <div class="column" style="float: left;">
                    First Name:
                </div>
                <div class="column" style="float: right;">
                    <input name="first_name" id='fname' value='austin' placeholder="First Name"><br>
                </div>
            </div>
             <div class="row">
                <div class="column" style="float: left;">
                    Last Name:
                </div>
                <div class="column" style="float: right;">
                    <input name="last_name" id='lname' value'123456'placeholder="Last Name"><br>
                </div>
            </div>
            <div class="row">
                <div class="column" style="float: left;">
                    Username:
                </div>
                <div class="column" style="float: right;">
                    <input name="username" id='username' value='VIEWINPUT' placeholder="Username"><br>
                </div>
            </div>
            <div class="row">
                <div class="column" style="float: left;">
                    Password:
                </div>
                <div class="column" style="float: right;">
                    <input name="password" id='password' value='1234567890' type="password" placeholder="Password"><br>
                </div>
            </div>
            <div class="row">
                <div class="column" style="float: left;">
                    Email:
                </div>
                <div class="column" style="float: right;">
                    <input name="email" id='email' value='345@vbnm.com' type="email" placeholder="Email Address"><br>
                </div>
            </div>
            {% comment %} <div class="row">
                <div class="column" style="float: left;">
                    Birthday:
                </div>
                <div class="column" style="float: right;">
                    <input name="dob" type="date" placeholder="Date of Birth"><br>
                </div>
            </div> {% endcomment %}
            {% comment %} <div class="row">
                <div class="column" style="float: left;">
                    Phone:
                </div>
                <div class="column" style="float: right;">
                    <input name="phone" type="tel" placeholder="Phone Number"><br>
                </div>
            </div> {% endcomment %}
            <br>
            <br>

            <input type="submit" value="SIGN-UP" id="login-button" style="float: right;">

            &nbsp;

        </form>
        {% endblock content %}
    </div>

    <script>
        function onSubmit() {
        console.log("hello world")
        const fname = document.getElementbyId("fname").value
        const lname = document.getElementbyId("lname").value
        const username = document.getElementbyId("username").value
        const email = document.getElementbyId("email").value
        const password = document.getElementbyId("password").value
        
        const body = JSON.stringify({
            'first_name':fname,
            'last_name':lname,
            'username':'CLASSAPI',
            'email':email,
            'password':password
        })

        fetch('http://localhost:8000/auth/register/', {
            method: "POST",
            body: body,
            headers: {
            'Content-Type': 'application/json'
            // 'Content-Type': 'application/x-www-form-urlencoded',
    },
        })      
        .then((response) => response.json())
        .then((res) => console.log(res))
        .catch((error) => console.log(error))
         
        )
    }
    
    $window.sessionStorage["token"] = response.data.token
    </script>




</body>

</html>